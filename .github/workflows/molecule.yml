name: molecule
on: [push]
jobs:
  ansible-molecule:
    runs-on: ubuntu-latest
    steps:
      - name: check out the code
        uses: actions/checkout@v2
      - name: configure molecule
        run: | 
          sudo apt-get -y update
          sudo apt-get -y install podman
          python3 -m pip install molecule[podman] 
          python3 -m pip install ansible==2.9.24
      - name: run molecule
        run: |
          cd roles/rocket_nginx
          molecule test
